const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "text/plain",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {text: "Generate Travel Plan for Location: York, UK, for 4 Days and 3 Night for Family with a Flight details , Flight Price with Booking url, Hotel options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time to travel for each of the location for 4 days and 3 night with each day plan with best time to  visit in a JSON format.Please don't give any other info other than the json data\\n "},
      ],
    },
    {
      role: "model",
      parts: [
        {text: "```json\n{\n  \"flight\": {\n    \"origin\": \"London\",\n    \"destination\": \"Leeds Bradford Airport\",\n    \"airline\": \"EasyJet\",\n    \"price\": \"£30\",\n    \"bookingUrl\": \"https://www.easyjet.com/\"\n  },\n  \"hotels\": [\n    {\n      \"name\": \"The Grand Hotel & Spa, York\",\n      \"address\": \"Station Rise, York YO1 6HS, United Kingdom\",\n      \"price\": \"From £250 per night\",\n      \"imageUrl\": \"https://www.thegrandyork.co.uk/media/wysiwyg/gallery/hero-gallery-02.jpg\",\n      \"geoCoordinates\": \"53.9588, -1.0778\",\n      \"rating\": 4.5,\n      \"description\": \"A luxurious 5-star hotel located in the heart of York, offering stunning views of the city walls and the River Ouse. It boasts elegant rooms, a world-class spa, and fine dining experiences.\"\n    },\n    {\n      \"name\": \"The Dean Court Hotel\",\n      \"address\": \"12-16 Bootham, York YO30 7BQ, United Kingdom\",\n      \"price\": \"From £150 per night\",\n      \"imageUrl\": \"https://www.thedeancourt.co.uk/images/hero-image.jpg\",\n      \"geoCoordinates\": \"53.9598, -1.0769\",\n      \"rating\": 4.0,\n      \"description\": \"A charming 4-star hotel located in the heart of York, offering comfortable rooms and a friendly atmosphere. It's within walking distance of many popular attractions.\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"title\": \"Arrival & City Exploration\",\n      \"description\": \"Settle into your hotel and explore the charming streets of York.\",\n      \"schedule\": [\n        {\n          \"time\": \"14:00\",\n          \"activity\": \"Check in at The Grand Hotel & Spa, York\",\n          \"location\": {\n            \"name\": \"The Grand Hotel & Spa, York\",\n            \"details\": \"Luxurious hotel with stunning views and world-class amenities.\",\n            \"imageUrl\": \"https://www.thegrandyork.co.uk/media/wysiwyg/gallery/hero-gallery-02.jpg\",\n            \"geoCoordinates\": \"53.9588, -1.0778\"\n          }\n        },\n        {\n          \"time\": \"15:00\",\n          \"activity\": \"Explore The Shambles\",\n          \"location\": {\n            \"name\": \"The Shambles\",\n            \"details\": \"A medieval street with timber-framed buildings and charming shops.\",\n            \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/14/Shambles_York_2017.jpg/1280px-Shambles_York_2017.jpg\",\n            \"geoCoordinates\": \"53.9592, -1.0763\"\n          }\n        },\n        {\n          \"time\": \"16:30\",\n          \"activity\": \"Visit York Minster\",\n          \"location\": {\n            \"name\": \"York Minster\",\n            \"details\": \"A magnificent Gothic cathedral with stunning stained glass windows.\",\n            \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/eb/York_Minster_West_Front_2016.jpg/1280px-York_Minster_West_Front_2016.jpg\",\n            \"geoCoordinates\": \"53.9594, -1.0751\",\n            \"ticketPricing\": \"Adults: £15, Children: £7.50\"\n          }\n        },\n        {\n          \"time\": \"18:30\",\n          \"activity\": \"Dinner at The Star Inn The City\",\n          \"location\": {\n            \"name\": \"The Star Inn The City\",\n            \"details\": \"A Michelin-starred restaurant serving modern British cuisine.\",\n            \"imageUrl\": \"https://www.thestarinnthecity.co.uk/wp-content/uploads/2020/09/The-Star-Inn-The-City-Restaurant-York-Dining-Room-1024x683.jpg\",\n            \"geoCoordinates\": \"53.9588, -1.0786\"\n          }\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"title\": \"Roman History & Museums\",\n      \"description\": \"Delve into the Roman past of York and explore fascinating museums.\",\n      \"schedule\": [\n        {\n          \"time\": \"10:00\",\n          \"activity\": \"Visit York Castle Museum\",\n          \"location\": {\n            \"name\": \"York Castle Museum\",\n            \"details\": \"A museum showcasing the history of York from Roman times to the present day.\",\n            \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/York_Castle_Museum_2009.jpg/1280px-York_Castle_Museum_2009.jpg\",\n            \"geoCoordinates\": \"53.9577, -1.0788\",\n            \"ticketPricing\": \"Adults: £14, Children: £7\"\n          }\n        },\n        {\n          \"time\": \"12:00\",\n          \"activity\": \"Lunch at The Rattle Owl\",\n          \"location\": {\n            \"name\": \"The Rattle Owl\",\n            \"details\": \"A cozy restaurant serving delicious British food.\",\n            \"imageUrl\": \"https://www.therattleowl.co.uk/wp-content/uploads/2016/12/2-Rattle-Owl-York-Menu-Cover-1024x683.jpg\",\n            \"geoCoordinates\": \"53.9595, -1.0756\"\n          }\n        },\n        {\n          \"time\": \"14:00\",\n          \"activity\": \"Explore York's Roman Baths\",\n          \"location\": {\n            \"name\": \"York's Roman Baths\",\n            \"details\": \"Discover the ruins of Roman baths and learn about their history.\",\n            \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/York_Roman_Bath_2010.jpg/1280px-York_Roman_Bath_2010.jpg\",\n            \"geoCoordinates\": \"53.9585, -1.0773\",\n            \"ticketPricing\": \"Adults: £10, Children: £5\"\n          }\n        },\n        {\n          \"time\": \"16:00\",\n          \"activity\": \"Visit the JORVIK Viking Centre\",\n          \"location\": {\n            \"name\": \"JORVIK Viking Centre\",\n            \"details\": \"An interactive museum that takes you back to Viking-age York.\",\n            \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Jorvik_Viking_Centre.jpg/1280px-Jorvik_Viking_Centre.jpg\",\n            \"geoCoordinates\": \"53.9571, -1.0798\",\n            \"ticketPricing\": \"Adults: £17, Children: £10\"\n          }\n        },\n        {\n          \"time\": \"19:00\",\n          \"activity\": \"Dinner at The House of York\",\n          \"location\": {\n            \"name\": \"The House of York\",\n            \"details\": \"A stylish restaurant serving modern European cuisine.\",\n            \"imageUrl\": \"https://www.thehouseofyork.com/wp-content/uploads/2021/07/HOUSE-OF-YORK-RESTAURANT-YORK.jpg\",\n            \"geoCoordinates\": \"53.9591, -1.0781\"\n          }\n        }\n      ]\n    },\n    {\n      \"day\": 3,\n      \"title\": \"Relaxing Day & Afternoon Tea\",\n      \"description\": \"Enjoy a relaxing day at the spa and indulge in a delightful afternoon tea.\",\n      \"schedule\": [\n        {\n          \"time\": \"10:00\",\n          \"activity\": \"Relax at The Grand Hotel & Spa\",\n          \"location\": {\n            \"name\": \"The Grand Hotel & Spa, York\",\n            \"details\": \"Luxurious hotel with stunning views and world-class spa facilities.\",\n            \"imageUrl\": \"https://www.thegrandyork.co.uk/media/wysiwyg/gallery/hero-gallery-02.jpg\",\n            \"geoCoordinates\": \"53.9588, -1.0778\"\n          }\n        },\n        {\n          \"time\": \"13:00\",\n          \"activity\": \"Lunch at The Ivy\",\n          \"location\": {\n            \"name\": \"The Ivy\",\n            \"details\": \"A stylish restaurant serving modern British cuisine.\",\n            \"imageUrl\": \"https://www.theivy.com/media/3716/the-ivy-york-exterior.jpg\",\n            \"geoCoordinates\": \"53.9592, -1.0767\"\n          }\n        },\n        {\n          \"time\": \"15:00\",\n          \"activity\": \"Enjoy Afternoon Tea at Betty's\",\n          \"location\": {\n            \"name\": \"Betty's Tea Rooms\",\n            \"details\": \"A famous tea room serving delicious afternoon tea with pastries and sandwiches.\",\n            \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/Betty%27s_Tea_Rooms_%28York%29_-_116.jpg/1280px-Betty%27s_Tea_Rooms_%28York%29_-_116.jpg\",\n            \"geoCoordinates\": \"53.9595, -1.0762\"\n          }\n        },\n        {\n          \"time\": \"18:00\",\n          \"activity\": \"Dinner at The Mulberry\",\n          \"location\": {\n            \"name\": \"The Mulberry\",\n            \"details\": \"A fine dining restaurant serving seasonal British cuisine.\",\n            \"imageUrl\": \"https://www.themulberryyork.co.uk/wp-content/uploads/2017/10/DSC_1368-scaled.jpg\",\n            \"geoCoordinates\": \"53.9596, -1.0746\"\n          }\n        }\n      ]\n    },\n    {\n      \"day\": 4,\n      \"title\": \"Departure\",\n      \"description\": \"Enjoy a leisurely breakfast and check out of your hotel.\",\n      \"schedule\": [\n        {\n          \"time\": \"09:00\",\n          \"activity\": \"Breakfast at The Grand Hotel & Spa, York\",\n          \"location\": {\n            \"name\": \"The Grand Hotel & Spa, York\",\n            \"details\": \"Luxurious hotel with stunning views and world-class amenities.\",\n            \"imageUrl\": \"https://www.thegrandyork.co.uk/media/wysiwyg/gallery/hero-gallery-02.jpg\",\n            \"geoCoordinates\": \"53.9588, -1.0778\"\n          }\n        },\n        {\n          \"time\": \"11:00\",\n          \"activity\": \"Check out of the hotel\",\n          \"location\": {\n            \"name\": \"The Grand Hotel & Spa, York\",\n            \"details\": \"Luxurious hotel with stunning views and world-class amenities.\",\n            \"imageUrl\": \"https://www.thegrandyork.co.uk/media/wysiwyg/gallery/hero-gallery-02.jpg\",\n            \"geoCoordinates\": \"53.9588, -1.0778\"\n          }\n        },\n        {\n          \"time\": \"12:00\",\n          \"activity\": \"Departure\",\n          \"location\": {\n            \"name\": \"York Railway Station\",\n            \"details\": \"Main railway station in York\",\n            \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/York_railway_station_%282017%29.jpg/1280px-York_railway_station_%282017%29.jpg\",\n            \"geoCoordinates\": \"53.9593, -1.0754\"\n          }\n        }\n      ]\n    }\n  ]\n}\n```\n"},
      ],
    },
  ],
});
